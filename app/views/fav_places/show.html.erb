<header>
<%= link_to "🔙みんなの守りたい自然に戻る", fav_places_path, data: { turbo: false }, class: "bg-green-400 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition inline-block" %>

</header>

<body style="background-color: white;">
    <% content_for(:fav_place, @fav_place.fav_name) %> <!-- 個別タイトル表示 -->

    <div class="container pt-5">
      <div class="flex justify-center mb-3">
        <div class="w-full max-w-2xl">
          <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-semibold text-green-600"><%= @fav_place.fav_name %></h3>

                  <p class="text-sm text-gray-700">
                    <strong>場所ID:</strong> <%= @fav_place.id %><br>
                    <strong>保存日時:</strong> <%= l(@fav_place.created_at, format: :long) %><br>
                    <strong>保存ユーザー:</strong> <%= @fav_place.user.user_name %>
                    <strong>住所:</strong> <%= @fav_place.address %>
                   </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</body>

<!-- Google Maps処理 -->
<div id="map" style="height: 400px; width: 100%; margin-top: 2rem;"></div>

<script>
  const lat = <%= @fav_place.latitude.to_f %>;
  const lng = <%= @fav_place.longitude.to_f %>;

  function initMap() {
    const map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: lat, lng: lng },
      zoom: 12,
      mapTypeId: "hybrid"
    });

    const marker = new google.maps.Marker({
      position: { lat: lat, lng: lng },
      map: map
    });

    const geocoder = new google.maps.Geocoder();
    const latLng = new google.maps.LatLng(lat, lng);

    geocoder.geocode({ 'location': latLng }, function(results, status) {
        if (status === 'OK' && results[0]) {
            const placeName = results[0].formatted_address;
            
            // 必要に応じて、ページに表示するなどの処理を追加
            const placeNameInput = document.getElementById('place-name');
            if (placeNameInput) {
            placeNameInput.value = placeName;
            }
        } else {
            console.error('場所名が取得できませんでした。');
        }
    });
  }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API'] %>&callback=initMap"></script>
