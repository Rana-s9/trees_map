{
  "version": 3,
  "sources": ["../../javascript/custom/top.js"],
  "sourcesContent": ["let controls, mixer;\n  const scene = new THREE.Scene();\n  const renderer = new THREE.WebGLRenderer({ antialias: true });\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  document.body.appendChild(renderer.domElement);\n  // const textureloader = new THREE.TextureLoader();\n  // textureloader.load('./star.png', function (texture) {\n  //   scene.background = texture;\n  // });\n  scene.background = new THREE.Color('#CDE6C7');\n  renderer.outputEncoding = THREE.sRGBEncoding;\n\n  // \u30E9\u30A4\u30C8\n  // \u5E73\u884C\u5149\u6E90\uFF08\u592A\u967D\u306E\u3088\u3046\u306A\u30E9\u30A4\u30C8\uFF09\n  // \u74B0\u5883\u5149\uFF08\u5168\u4F53\u3092\u5747\u7B49\u306B\u7167\u3089\u3059\u5149\uFF09\n  const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);\n  scene.add(ambientLight);\n  \n  // \u5E73\u884C\u5149\u6E90\uFF08\u592A\u967D\u306E\u3088\u3046\u306A\u65B9\u5411\u6027\u306E\u3042\u308B\u5149\uFF09\n  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n  directionalLight.position.set(5, 10, 7);\n  scene.add(directionalLight);\n\n  // Draco\u30ED\u30FC\u30C0\u30FC\u8A2D\u5B9A\n  let dracoLoader = new THREE.DRACOLoader();\n  dracoLoader.setDecoderPath('https://www.gstatic.com/draco/v1/decoders/');\n\n\n  // GLTF\u30ED\u30FC\u30C0\u30FC\u8A2D\u5B9A\n  let loader = new THREE.GLTFLoader();\n  loader.setDRACOLoader(dracoLoader);\n\n//   const texture = new THREE.Texture();\n//   texture.format = THREE.RGBAFormat;\n\n  loader.load('./night_trees_new.glb', function (gltf) {\n    const model = gltf.scene;\n    // gltf.scene.rotation.z = Math.PI; // 180\u5EA6\u56DE\u8EE2\uFF08\u4E0A\u4E0B\u9006\u3055\u4FEE\u6B63\uFF09\n    scene.add(model);\n\n    // \u30C7\u30D5\u30A9\u30EB\u30C8\u30AB\u30E1\u30E9\u306E\u8A2D\u5B9A\n  const defaultCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  defaultCamera.position.set(0, 5, 8);\n\n  // \u30AB\u30E1\u30E9\u306E\u8AAD\u307F\u8FBC\u307F\n  if (gltf.cameras && gltf.cameras.length > 0) {\n    const cameraName = \"1\u30AB\u30E1\";\n    const foundCamera = gltf.cameras.find(cam => cam.name === cameraName);\n\n    camera = foundCamera;  // \u898B\u3064\u304B\u3063\u305F\u30AB\u30E1\u30E9\u3092\u4F7F\u7528\n    camera.up.set(0, 1, 0); // Three.js\u306F Y \u3092\u4E0A\u65B9\u5411\u306B\u8A2D\u5B9A\uFF08\u901A\u5E38\uFF09\n\n    camera.rotation.Y += Math.PI; // \u4E0A\u4E0B\u53CD\u8EE2\u3092\u4FEE\u6B63\n    camera.position.z += 1;\n  } else {\n    camera = defaultCamera;  // GLTF\u306B\u30AB\u30E1\u30E9\u304C\u306A\u3044\u5834\u5408\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u30AB\u30E1\u30E9\u3092\u4F7F\u7528\n  }\n  camera.rotation.y = Math.PI;  // Y\u8EF8\u3067180\u5EA6\u56DE\u8EE2\u3055\u305B\u308B\n  // camera.lookAt(new THREE.Vector3(0, 0, 0)); // \u4F8B\u3048\u3070\u3001\u30B7\u30FC\u30F3\u306E\u4E2D\u5FC3\u3092\u5411\u304B\u305B\u308B\n  // camera.flipY = false\n  scene.add(camera);  // \u30AB\u30E1\u30E9\u3092\u30B7\u30FC\u30F3\u306B\u8FFD\u52A0\n\n  const controls = new THREE.OrbitControls(camera, renderer.domElement);\n\n  // \u56DE\u8EE2\u3092\u7121\u52B9\u5316\uFF08\u30DE\u30A6\u30B9\u30C9\u30E9\u30C3\u30B0\u306B\u3088\u308B\u56DE\u8EE2\u304C\u52B9\u304B\u306A\u304F\u306A\u308B\uFF09\n  controls.enableRotate = false;\n\n  // \u30D1\u30F3\uFF08\u5E73\u884C\u79FB\u52D5\uFF09\u3092\u7121\u52B9\u5316\n  controls.enablePan = false;\n\n  // \u30BA\u30FC\u30E0\u306F\u6709\u52B9\uFF08\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\uFF09\n  controls.enableZoom = false;\n\n    // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u8A2D\u5B9A\n    if (gltf.animations && gltf.animations.length) {\n      mixer = new THREE.AnimationMixer(model); // \u30E2\u30C7\u30EB\u306B\u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u3092\u9069\u7528\n      gltf.animations.forEach((clip) => {\n        const action = mixer.clipAction(clip);\n        action.play(); // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u518D\u751F\n        action.setLoop(THREE.LoopRepeat, Infinity); // \u30EB\u30FC\u30D7\u518D\u751F\n      });\n    }\n\n    // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u958B\u59CB\n    animate();\n  });\n\n  function animate() {\n    requestAnimationFrame(animate);\n\n    // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u306E\u66F4\u65B0\n    if (mixer) mixer.update(0.008); // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u901F\u5EA6\u8ABF\u6574\uFF080.01\u3092\u8ABF\u6574\u3059\u308B\uFF09\n\n    // \u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u306E\u66F4\u65B0\n    // if (controls) controls.update();\n\n    if (camera.position.y > 0.1) {\n      camera.position.y = 0.1;\n    }\n\n    // \u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\n    if (camera) renderer.render(scene, camera);\n  }\n\n  window.addEventListener('resize', () => {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    renderer.setSize(width, height);\n    if (camera) {\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n    }\n  });"],
  "mappings": ";;AAAA,MAAc;AACZ,MAAM,QAAQ,IAAI,MAAM,MAAM;AAC9B,MAAM,WAAW,IAAI,MAAM,cAAc,EAAE,WAAW,KAAK,CAAC;AAE5D,WAAS,QAAQ,OAAO,YAAY,OAAO,WAAW;AACtD,WAAS,cAAc,OAAO,gBAAgB;AAC9C,WAAS,KAAK,YAAY,SAAS,UAAU;AAK7C,QAAM,aAAa,IAAI,MAAM,MAAM,SAAS;AAC5C,WAAS,iBAAiB,MAAM;AAKhC,MAAM,eAAe,IAAI,MAAM,aAAa,UAAU,GAAG;AACzD,QAAM,IAAI,YAAY;AAGtB,MAAM,mBAAmB,IAAI,MAAM,iBAAiB,UAAU,GAAG;AACjE,mBAAiB,SAAS,IAAI,GAAG,IAAI,CAAC;AACtC,QAAM,IAAI,gBAAgB;AAG1B,MAAI,cAAc,IAAI,MAAM,YAAY;AACxC,cAAY,eAAe,4CAA4C;AAIvE,MAAI,SAAS,IAAI,MAAM,WAAW;AAClC,SAAO,eAAe,WAAW;AAKjC,SAAO,KAAK,yBAAyB,SAAU,MAAM;AACnD,UAAM,QAAQ,KAAK;AAEnB,UAAM,IAAI,KAAK;AAGjB,UAAM,gBAAgB,IAAI,MAAM,kBAAkB,IAAI,OAAO,aAAa,OAAO,aAAa,KAAK,GAAI;AACvG,kBAAc,SAAS,IAAI,GAAG,GAAG,CAAC;AAGlC,QAAI,KAAK,WAAW,KAAK,QAAQ,SAAS,GAAG;AAC3C,YAAM,aAAa;AACnB,YAAM,cAAc,KAAK,QAAQ,KAAK,SAAO,IAAI,SAAS,UAAU;AAEpE,eAAS;AACT,aAAO,GAAG,IAAI,GAAG,GAAG,CAAC;AAErB,aAAO,SAAS,KAAK,KAAK;AAC1B,aAAO,SAAS,KAAK;AAAA,IACvB,OAAO;AACL,eAAS;AAAA,IACX;AACA,WAAO,SAAS,IAAI,KAAK;AAGzB,UAAM,IAAI,MAAM;AAEhB,UAAM,WAAW,IAAI,MAAM,cAAc,QAAQ,SAAS,UAAU;AAGpE,aAAS,eAAe;AAGxB,aAAS,YAAY;AAGrB,aAAS,aAAa;AAGpB,QAAI,KAAK,cAAc,KAAK,WAAW,QAAQ;AAC7C,cAAQ,IAAI,MAAM,eAAe,KAAK;AACtC,WAAK,WAAW,QAAQ,CAAC,SAAS;AAChC,cAAM,SAAS,MAAM,WAAW,IAAI;AACpC,eAAO,KAAK;AACZ,eAAO,QAAQ,MAAM,YAAY,QAAQ;AAAA,MAC3C,CAAC;AAAA,IACH;AAGA,YAAQ;AAAA,EACV,CAAC;AAED,WAAS,UAAU;AACjB,0BAAsB,OAAO;AAG7B,QAAI,MAAO,OAAM,OAAO,IAAK;AAK7B,QAAI,OAAO,SAAS,IAAI,KAAK;AAC3B,aAAO,SAAS,IAAI;AAAA,IACtB;AAGA,QAAI,OAAQ,UAAS,OAAO,OAAO,MAAM;AAAA,EAC3C;AAEA,SAAO,iBAAiB,UAAU,MAAM;AACtC,UAAM,QAAQ,OAAO;AACrB,UAAM,SAAS,OAAO;AACtB,aAAS,QAAQ,OAAO,MAAM;AAC9B,QAAI,QAAQ;AACV,aAAO,SAAS,QAAQ;AACxB,aAAO,uBAAuB;AAAA,IAChC;AAAA,EACF,CAAC;",
  "names": []
}
